import{Q as w,a as h,b as k}from"./QPage.2249ad70.js";import{Q as y,a as b}from"./QTable.f49a9629.js";import{c as C}from"./QBtn.99a4b841.js";import{a as B,u as T}from"./index.5501d6df.js";import{_ as O,Z as P,C as Q,E as d,F as c,G as a,M as p,L as _,H as s,$ as v}from"./index.5b7fec29.js";import"./index.dc75ef15.js";import"./axios.0ed95acd.js";const S={setup(){const i=[{name:"number",required:!0,label:"#",align:"center",field:e=>e.num,format:e=>`${e}`,sortable:!0},{name:"product",label:"Product",field:"stg",sortable:!0,format:e=>e.join(", ")},{name:"date",label:"Date",field:"dadd",sortable:!0,format:e=>new Date(e).toLocaleString("en-GB").split("/").join(".")},{name:"client",label:"Client",field:e=>{var o;return(o=e.client_name)!=null?o:e.person_fullname},sortable:!0},{name:"state",label:"State",field:"state",sortable:!0},{name:"contact",label:"Contact",field:"person_phone",sortable:!1,format:e=>`+${e}`},{name:"do_delete",style:"width: 0.6rem",headerStyle:"width: 0.6rem"}],m=new Map([["init",{label:"Initial",color:"red"}],["finish",{label:"Finished",color:"green"}],["progress",{label:"WIP",color:"orange"}]]),l=B(),{orders:r}=P(l),u=Q(),n=T();function t(e,o){const f=`/orders/${o.id}`;n.addNewTab({name:f,label:`Order #${o.num}`,closable:!0}),u.push(f)}function g(e){l.dispatchDeleteOrder(e),n.removeTabByName(`/orders/${e}`)}return{columns:i,orders:r,orderStore:l,stateToBadgeMap:m,onRowClick:t,deleteOrder:g}}};function x(i,m,l,r,u,n){return d(),c(w,{class:"q-pa-md row justify-center items-start"},{default:a(()=>[r.orders.length===0?(d(),c(h,{key:0,indeterminate:"",size:"90px",thickness:.2,color:"indigo","center-color":"grey-4","track-color":"grey-2"})):p("",!0),r.orders.length?(d(),c(y,{key:1,class:"col sticky-header-column-table",title:"Orders",rows:r.orders,columns:r.columns,"row-key":"id",onRowClick:_(r.onRowClick,["stop"]),pagination:{rowsPerPage:10}},{"body-cell-state":a(t=>[s(b,{props:t},{default:a(()=>[v("div",null,[s(k,{color:r.stateToBadgeMap.get(t.row.state).color,label:r.stateToBadgeMap.get(t.row.state).label},null,8,["color","label"])])]),_:2},1032,["props"])]),"body-cell-do_delete":a(t=>[s(b,{props:t},{default:a(()=>[s(C,{icon:"delete",flat:"",size:"0.6rem",onClick:_(()=>r.deleteOrder(t.row.id),["prevent","stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","onRowClick"])):p("",!0)]),_:1})}var z=O(S,[["render",x]]);export{z as default};
