import{j as ke,f as ye,k as be,l as xe,m as Me,n as we,o as me,p as ne,q as Se,Q as Ve,a as Ce,b as oe,i as re}from"./index.d68046fc.js";import{r as X,l as L,p as U,f as Fe,c as _,k as ge,o as Ee,a as le,h as G,a4 as Re,g as ve,S as ie,u as Pe,v as pe,x as De,s as se,a3 as Ae,_ as qe,C as Te,$ as Ie,E as J,F as ee,G as ue,N as te,J as Be,I as O,H as ae}from"./index.48a5f887.js";import{b as Oe,v as Ne,c as de}from"./QBtn.827b54ce.js";import{u as _e}from"./index.9bd0e330.js";import"./scroll.52a63b11.js";import"./axios.0ed95acd.js";const ce={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},$={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},he=Object.keys($);he.forEach(e=>{$[e].regex=new RegExp($[e].pattern)});const je=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+he.join("")+"])|(.)","g"),fe=/[.*+?^${}()|[\]\\]/g,S=String.fromCharCode(1),ze={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Le(e,m,q,r){let u,c,w,F,i,b;const C=X(null),g=X(s());function Z(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}L(()=>e.type+e.autogrow,T),L(()=>e.mask,n=>{if(n!==void 0)N(g.value,!0);else{const a=A(g.value);T(),e.modelValue!==a&&m("update:modelValue",a)}}),L(()=>e.fillMask+e.reverseFillMask,()=>{C.value===!0&&N(g.value,!0)}),L(()=>e.unmaskedValue,()=>{C.value===!0&&N(g.value)});function s(){if(T(),C.value===!0){const n=P(A(e.modelValue));return e.fillMask!==!1?W(n):n}return e.modelValue}function E(n){if(n<u.length)return u.slice(-n);let a="",o=u;const l=o.indexOf(S);if(l!==-1){for(let f=n-o.length;f>0;f--)a+=S;o=o.slice(0,l)+a+o.slice(l)}return o}function T(){if(C.value=e.mask!==void 0&&e.mask.length!==0&&Z(),C.value===!1){F=void 0,u="",c="";return}const n=ce[e.mask]===void 0?e.mask:ce[e.mask],a=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",o=a.replace(fe,"\\$&"),l=[],f=[],d=[];let M=e.reverseFillMask===!0,v="",h="";n.replace(je,(V,t,y,j,B)=>{if(j!==void 0){const p=$[j];d.push(p),h=p.negate,M===!0&&(f.push("(?:"+h+"+)?("+p.pattern+"+)?(?:"+h+"+)?("+p.pattern+"+)?"),M=!1),f.push("(?:"+h+"+)?("+p.pattern+")?")}else if(y!==void 0)v="\\"+(y==="\\"?"":y),d.push(y),l.push("([^"+v+"]+)?"+v+"?");else{const p=t!==void 0?t:B;v=p==="\\"?"\\\\\\\\":p.replace(fe,"\\\\$&"),d.push(p),l.push("([^"+v+"]+)?"+v+"?")}});const K=new RegExp("^"+l.join("")+"("+(v===""?".":"[^"+v+"]")+"+)?"+(v===""?"":"["+v+"]*")+"$"),z=f.length-1,k=f.map((V,t)=>t===0&&e.reverseFillMask===!0?new RegExp("^"+o+"*"+V):t===z?new RegExp("^"+V+"("+(h===""?".":h)+"+)?"+(e.reverseFillMask===!0?"$":o+"*")):new RegExp("^"+V));w=d,F=V=>{const t=K.exec(e.reverseFillMask===!0?V:V.slice(0,d.length+1));t!==null&&(V=t.slice(1).join(""));const y=[],j=k.length;for(let B=0,p=V;B<j;B++){const H=k[B].exec(p);if(H===null)break;p=p.slice(H.shift().length),y.push(...H)}return y.length!==0?y.join(""):V},u=d.map(V=>typeof V=="string"?V:S).join(""),c=u.split(S).join(a)}function N(n,a,o){const l=r.value,f=l.selectionEnd,d=l.value.length-f,M=A(n);a===!0&&T();const v=P(M),h=e.fillMask!==!1?W(v):v,K=g.value!==h;l.value!==h&&(l.value=h),K===!0&&(g.value=h),document.activeElement===l&&U(()=>{if(h===c){const k=e.reverseFillMask===!0?c.length:0;l.setSelectionRange(k,k,"forward");return}if(o==="insertFromPaste"&&e.reverseFillMask!==!0){const k=l.selectionEnd;let V=f-1;for(let t=i;t<=V&&t<k;t++)u[t]!==S&&V++;D.right(l,V);return}if(["deleteContentBackward","deleteContentForward"].indexOf(o)!==-1){const k=e.reverseFillMask===!0?f===0?h.length>v.length?1:0:Math.max(0,h.length-(h===c?0:Math.min(v.length,d)+1))+1:f;l.setSelectionRange(k,k,"forward");return}if(e.reverseFillMask===!0)if(K===!0){const k=Math.max(0,h.length-(h===c?0:Math.min(v.length,d+1)));k===1&&f===1?l.setSelectionRange(k,k,"forward"):D.rightReverse(l,k)}else{const k=h.length-d;l.setSelectionRange(k,k,"backward")}else if(K===!0){const k=Math.max(0,u.indexOf(S),Math.min(v.length,f)-1);D.right(l,k)}else{const k=f-1;D.right(l,k)}});const z=e.unmaskedValue===!0?A(h):h;String(e.modelValue)!==z&&(e.modelValue!==null||z!=="")&&q(z,!0)}function Q(n,a,o){const l=P(A(n.value));a=Math.max(0,u.indexOf(S),Math.min(l.length,a)),i=a,n.setSelectionRange(a,o,"forward")}const D={left(n,a){const o=u.slice(a-1).indexOf(S)===-1;let l=Math.max(0,a-1);for(;l>=0;l--)if(u[l]===S){a=l,o===!0&&a++;break}if(l<0&&u[a]!==void 0&&u[a]!==S)return D.right(n,0);a>=0&&n.setSelectionRange(a,a,"backward")},right(n,a){const o=n.value.length;let l=Math.min(o,a+1);for(;l<=o;l++)if(u[l]===S){a=l;break}else u[l-1]===S&&(a=l);if(l>o&&u[a-1]!==void 0&&u[a-1]!==S)return D.left(n,o);n.setSelectionRange(a,a,"forward")},leftReverse(n,a){const o=E(n.value.length);let l=Math.max(0,a-1);for(;l>=0;l--)if(o[l-1]===S){a=l;break}else if(o[l]===S&&(a=l,l===0))break;if(l<0&&o[a]!==void 0&&o[a]!==S)return D.rightReverse(n,0);a>=0&&n.setSelectionRange(a,a,"backward")},rightReverse(n,a){const o=n.value.length,l=E(o),f=l.slice(0,a+1).indexOf(S)===-1;let d=Math.min(o,a+1);for(;d<=o;d++)if(l[d-1]===S){a=d,a>0&&f===!0&&a--;break}if(d>o&&l[a-1]!==void 0&&l[a-1]!==S)return D.leftReverse(n,o);n.setSelectionRange(a,a,"forward")}};function x(n){m("click",n),b=void 0}function R(n){if(m("keydown",n),Fe(n)===!0||n.altKey===!0)return;const a=r.value,o=a.selectionStart,l=a.selectionEnd;if(n.shiftKey||(b=void 0),n.keyCode===37||n.keyCode===39){n.shiftKey&&b===void 0&&(b=a.selectionDirection==="forward"?o:l);const f=D[(n.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(n.preventDefault(),f(a,b===o?l:o),n.shiftKey){const d=a.selectionStart;a.setSelectionRange(Math.min(b,d),Math.max(b,d),"forward")}}else n.keyCode===8&&e.reverseFillMask!==!0&&o===l?(D.left(a,o),a.setSelectionRange(a.selectionStart,l,"backward")):n.keyCode===46&&e.reverseFillMask===!0&&o===l&&(D.rightReverse(a,l),a.setSelectionRange(o,a.selectionEnd,"forward"))}function P(n){if(n==null||n==="")return"";if(e.reverseFillMask===!0)return I(n);const a=w;let o=0,l="";for(let f=0;f<a.length;f++){const d=n[o],M=a[f];if(typeof M=="string")l+=M,d===M&&o++;else if(d!==void 0&&M.regex.test(d))l+=M.transform!==void 0?M.transform(d):d,o++;else return l}return l}function I(n){const a=w,o=u.indexOf(S);let l=n.length-1,f="";for(let d=a.length-1;d>=0&&l!==-1;d--){const M=a[d];let v=n[l];if(typeof M=="string")f=M+f,v===M&&l--;else if(v!==void 0&&M.regex.test(v))do f=(M.transform!==void 0?M.transform(v):v)+f,l--,v=n[l];while(o===d&&v!==void 0&&M.regex.test(v));else return f}return f}function A(n){return typeof n!="string"||F===void 0?typeof n=="number"?F(""+n):n:F(n)}function W(n){return c.length-n.length<=0?n:e.reverseFillMask===!0&&n.length!==0?c.slice(0,-n.length)+n:n+c.slice(n.length)}return{innerValue:g,hasMask:C,moveCursorForPaste:Q,updateMaskValue:N,onMaskedKeydown:R,onMaskedClick:x}}function Ke(e,m){function q(){const r=e.modelValue;try{const u="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(c=>{u.items.add(c)}),{files:u.files}}catch{return{files:void 0}}}return m===!0?_(()=>{if(e.type==="file")return q()}):_(q)}var Y=ge({name:"QInput",inheritAttrs:!1,props:{...ke,...ze,...ye,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...be,"paste","change","keydown","click","animationend"],setup(e,{emit:m,attrs:q}){const{proxy:r}=ve(),{$q:u}=r,c={};let w=NaN,F,i,b=null,C;const g=X(null),Z=xe(e),{innerValue:s,hasMask:E,moveCursorForPaste:T,updateMaskValue:N,onMaskedKeydown:Q,onMaskedClick:D}=Le(e,m,v,g),x=Ke(e,!0),R=_(()=>ne(s.value)),P=Se(d),I=Me({changeEvent:!0}),A=_(()=>e.type==="textarea"||e.autogrow===!0),W=_(()=>A.value===!0||["text","search","url","tel","password"].includes(e.type)),n=_(()=>{const t={...I.splitAttrs.listeners.value,onInput:d,onPaste:f,onChange:K,onBlur:z,onFocus:ie};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=P,E.value===!0&&(t.onKeydown=Q,t.onClick=D),e.autogrow===!0&&(t.onAnimationend=M),t}),a=_(()=>{const t={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:Z.value,...I.splitAttrs.attributes.value,id:I.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return A.value===!1&&(t.type=e.type),e.autogrow===!0&&(t.rows=1),t});L(()=>e.type,()=>{g.value&&(g.value.value=e.modelValue)}),L(()=>e.modelValue,t=>{if(E.value===!0){if(i===!0&&(i=!1,String(t)===w))return;N(t)}else s.value!==t&&(s.value=t,e.type==="number"&&c.hasOwnProperty("value")===!0&&(F===!0?F=!1:delete c.value));e.autogrow===!0&&U(h)}),L(()=>e.autogrow,t=>{t===!0?U(h):g.value!==null&&q.rows>0&&(g.value.style.height="auto")}),L(()=>e.dense,()=>{e.autogrow===!0&&U(h)});function o(){me(()=>{const t=document.activeElement;g.value!==null&&g.value!==t&&(t===null||t.id!==I.targetUid.value)&&g.value.focus({preventScroll:!0})})}function l(){g.value!==null&&g.value.select()}function f(t){if(E.value===!0&&e.reverseFillMask!==!0){const y=t.target;T(y,y.selectionStart,y.selectionEnd)}m("paste",t)}function d(t){if(!t||!t.target)return;if(e.type==="file"){m("update:modelValue",t.target.files);return}const y=t.target.value;if(t.target.qComposing===!0){c.value=y;return}if(E.value===!0)N(y,!1,t.inputType);else if(v(y),W.value===!0&&t.target===document.activeElement){const{selectionStart:j,selectionEnd:B}=t.target;j!==void 0&&B!==void 0&&U(()=>{t.target===document.activeElement&&y.indexOf(t.target.value)===0&&t.target.setSelectionRange(j,B)})}e.autogrow===!0&&h()}function M(t){m("animationend",t),h()}function v(t,y){C=()=>{b=null,e.type!=="number"&&c.hasOwnProperty("value")===!0&&delete c.value,e.modelValue!==t&&w!==t&&(w=t,y===!0&&(i=!0),m("update:modelValue",t),U(()=>{w===t&&(w=NaN)})),C=void 0},e.type==="number"&&(F=!0,c.value=t),e.debounce!==void 0?(b!==null&&clearTimeout(b),c.value=t,b=setTimeout(C,e.debounce)):C()}function h(){requestAnimationFrame(()=>{const t=g.value;if(t!==null){const y=t.parentNode.style,{scrollTop:j}=t,{overflowY:B,maxHeight:p}=u.platform.is.firefox===!0?{}:window.getComputedStyle(t),H=B!==void 0&&B!=="scroll";H===!0&&(t.style.overflowY="hidden"),y.marginBottom=t.scrollHeight-1+"px",t.style.height="1px",t.style.height=t.scrollHeight+"px",H===!0&&(t.style.overflowY=parseInt(p,10)<t.scrollHeight?"auto":"hidden"),y.marginBottom="",t.scrollTop=j}})}function K(t){P(t),b!==null&&(clearTimeout(b),b=null),C!==void 0&&C(),m("change",t.target.value)}function z(t){t!==void 0&&ie(t),b!==null&&(clearTimeout(b),b=null),C!==void 0&&C(),F=!1,i=!1,delete c.value,e.type!=="file"&&setTimeout(()=>{g.value!==null&&(g.value.value=s.value!==void 0?s.value:"")})}function k(){return c.hasOwnProperty("value")===!0?c.value:s.value!==void 0?s.value:""}Ee(()=>{z()}),le(()=>{e.autogrow===!0&&h()}),Object.assign(I,{innerValue:s,fieldClass:_(()=>`q-${A.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:_(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:g,emitValue:v,hasValue:R,floatingLabel:_(()=>R.value===!0&&(e.type!=="number"||isNaN(s.value)===!1)||ne(e.displayValue)),getControl:()=>G(A.value===!0?"textarea":"input",{ref:g,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...a.value,...n.value,...e.type!=="file"?{value:k()}:x.value}),getShadowControl:()=>G("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(A.value===!0?"":" text-no-wrap")},[G("span",{class:"invisible"},k()),G("span",e.shadowText)])});const V=we(I);return Object.assign(r,{focus:o,select:l,getNativeElement:()=>g.value}),Re(r,"nativeEl",()=>g.value),V}}),Ue=ge({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:m,emit:q}){const r=ve(),u=X(null);let c=0;const w=[];function F(s){const E=typeof s=="boolean"?s:e.noErrorFocus!==!0,T=++c,N=(x,R)=>{q(`validation${x===!0?"Success":"Error"}`,R)},Q=x=>{const R=x.validate();return typeof R.then=="function"?R.then(P=>({valid:P,comp:x}),P=>({valid:!1,comp:x,err:P})):Promise.resolve({valid:R,comp:x})};return(e.greedy===!0?Promise.all(w.map(Q)).then(x=>x.filter(R=>R.valid!==!0)):w.reduce((x,R)=>x.then(()=>Q(R).then(P=>{if(P.valid===!1)return Promise.reject(P)})),Promise.resolve()).catch(x=>[x])).then(x=>{if(x===void 0||x.length===0)return T===c&&N(!0),!0;if(T===c){const{comp:R,err:P}=x[0];if(P!==void 0&&console.error(P),N(!1,R),E===!0){const I=x.find(({comp:A})=>typeof A.focus=="function"&&Ne(A.$)===!1);I!==void 0&&I.comp.focus()}}return!1})}function i(){c++,w.forEach(s=>{typeof s.resetValidation=="function"&&s.resetValidation()})}function b(s){s!==void 0&&se(s);const E=c+1;F().then(T=>{E===c&&T===!0&&(e.onSubmit!==void 0?q("submit",s):s!==void 0&&s.target!==void 0&&typeof s.target.submit=="function"&&s.target.submit())})}function C(s){s!==void 0&&se(s),q("reset"),U(()=>{i(),e.autofocus===!0&&e.noResetFocus!==!0&&g()})}function g(){me(()=>{if(u.value===null)return;const s=u.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||u.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||u.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(u.value.querySelectorAll("[tabindex]"),E=>E.tabIndex!==-1);s!=null&&s.focus({preventScroll:!0})})}Pe(Ae,{bindComponent(s){w.push(s)},unbindComponent(s){const E=w.indexOf(s);E!==-1&&w.splice(E,1)}});let Z=!1;return pe(()=>{Z=!0}),De(()=>{Z===!0&&e.autofocus===!0&&g()}),le(()=>{e.autofocus===!0&&g()}),Object.assign(r.proxy,{validate:F,resetValidation:i,submit:b,reset:C,focus:g,getValidationComponents:()=>w}),()=>G("form",{class:"q-form",ref:u,onSubmit:b,onReset:C},Oe(m.default))}});const Ze={setup(){const e=_e(),r=Te().currentRoute.value.fullPath.split("/")[2];le(()=>e.dispatchGetOrderById(r));const{orderDetails:u}=Ie(e);return{orderDetails:u,stateToBadgeMap:new Map([["init",{label:"Initial",color:"red"}],["finish",{label:"Finished",color:"green"}],["progress",{label:"WIP",color:"orange"}]]),validateEmail(c){return/[a-z0-9]+@[a-z]+\.[a-z]{2,3}/.test(c)},businessStructureList:["UL","IP"],stgsList:["ACCOPEN","FNS.REG"],onSubmit(){},onReset(){}}}},Qe={key:1,class:"q-gutter-sm q-pa-lg col-12"},He={class:"col-6 q-px-lg q-pb-xl"},Ye={class:"col-6 q-px-lg q-pb-xl"},Ge={class:"q-ml-auto q-pr-lg"};function We(e,m,q,r,u,c){return J(),ee(Ve,{class:"q-pa-md row justify-center items-start",style:{"align-content":"start"}},{default:ue(()=>{var w,F;return[r.orderDetails===null?(J(),ee(Ce,{key:0,indeterminate:"",size:"90px",thickness:.2,color:"indigo","center-color":"grey-4","track-color":"grey-2"})):te("",!0),r.orderDetails!==null?(J(),Be("div",Qe,[O(oe,{outline:"",color:"orange",label:new Date(r.orderDetails.dadd).toISOString().split("T").join(", ").slice(0,-8)},null,8,["label"]),O(oe,{color:(w=r.stateToBadgeMap.get(r.orderDetails.state))==null?void 0:w.color,label:(F=r.stateToBadgeMap.get(r.orderDetails.state))==null?void 0:F.label},null,8,["color","label"])])):te("",!0),r.orderDetails!==null?(J(),ee(Ue,{key:2,onSubmit:r.onSubmit,onReset:r.onReset,class:"col-12 row justify-center items-start"},{default:ue(()=>[ae("div",He,[O(Y,{class:"q-mb-sm",filled:"",modelValue:r.orderDetails.company_name,"onUpdate:modelValue":m[0]||(m[0]=i=>r.orderDetails.company_name=i),label:"Company name *","lazy-rules":"",readonly:"",rules:[i=>i&&i.length>0||"Please type something"]},null,8,["modelValue","rules"]),O(re,{class:"q-mb-sm q-pb-lg",filled:"",modelValue:r.orderDetails.company_type,"onUpdate:modelValue":m[1]||(m[1]=i=>r.orderDetails.company_type=i),options:r.businessStructureList,label:"Business structure","stack-label":"",readonly:""},null,8,["modelValue","options"]),O(Y,{class:"q-mb-sm",filled:"",type:"number",modelValue:r.orderDetails.inn,"onUpdate:modelValue":m[2]||(m[2]=i=>r.orderDetails.inn=i),label:"INN *",readonly:"","lazy-rules":"",rules:[i=>i!==null&&i!==""||"Please type INN",i=>i.toString().split("").length===12||"Please type 12 digits"]},null,8,["modelValue","rules"]),O(re,{filled:"",modelValue:r.orderDetails.stg,"onUpdate:modelValue":m[3]||(m[3]=i=>r.orderDetails.stg=i),multiple:"",options:r.stgsList,label:"Product(s)",readonly:""},null,8,["modelValue","options"])]),ae("div",Ye,[O(Y,{class:"q-mb-sm",filled:"",modelValue:r.orderDetails.person_fullname,"onUpdate:modelValue":m[4]||(m[4]=i=>r.orderDetails.person_fullname=i),label:"Contact person *",readonly:"","lazy-rules":"",rules:[i=>i&&i.length>0||"Please type something"]},null,8,["modelValue","rules"]),O(Y,{class:"q-mb-sm q-pb-lg",modelValue:r.orderDetails.person_phone,"onUpdate:modelValue":m[5]||(m[5]=i=>r.orderDetails.person_phone=i),filled:"",type:"tel",label:"Telephone number","stack-label":"",readonly:""},null,8,["modelValue"]),O(Y,{class:"q-mb-sm",filled:"",label:"E-mail *",modelValue:r.orderDetails.person_email,"onUpdate:modelValue":m[6]||(m[6]=i=>r.orderDetails.person_email=i),readonly:"","lazy-rules":"",rules:[i=>r.validateEmail(i)||"Please enter a valid email address"]},null,8,["modelValue","rules"])]),ae("div",Ge,[O(de,{label:"Reset",type:"reset",color:"indigo",flat:"",class:"q-ml-sm",disabled:""}),O(de,{label:"Submit",type:"submit",color:"indigo",disabled:""})])]),_:1},8,["onSubmit","onReset"])):te("",!0)]}),_:1})}var lt=qe(Ze,[["render",We]]);export{lt as default};
