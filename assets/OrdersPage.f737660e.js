import{Q as g,a as w,b as h}from"./QPage.7818dab3.js";import{Q as k,a as b}from"./QTable.7630496f.js";import{c as y}from"./QBtn.1bbc7c36.js";import{a as C,u as S}from"./index.8f1ff550.js";import{_ as T,Z as B,C as P,E as n,F as i,G as a,M as p,L as _,H as l,$ as Q}from"./index.e593c5a3.js";import"./index.ddbd5591.js";import"./axios.0ed95acd.js";const O={setup(){const c=[{name:"number",required:!0,label:"#",align:"center",field:e=>e.num,format:e=>`${e}`,sortable:!0},{name:"product",label:"Product",field:"stg",sortable:!0,format:e=>e.join(", ")},{name:"date",label:"Date",field:"dadd",sortable:!0,format:e=>new Date(e).toISOString().split("T").join(", ").slice(0,-8)},{name:"client",label:"Client",field:e=>{var o;return(o=e.client_name)!=null?o:e.person_fullname},sortable:!0},{name:"state",label:"State",field:"state",sortable:!0},{name:"contact",label:"Contact",field:"person_phone",sortable:!1,format:e=>`+${e}`},{name:"do_delete",style:"width: 0.6rem",headerStyle:"width: 0.6rem"}],d=new Map([["init",{label:"Initial",color:"red"}],["finish",{label:"Finished",color:"green"}],["progress",{label:"WIP",color:"orange"}]]),s=C(),{orders:r}=B(s),m=P(),u=S();function t(e,o){const f=`/orders/${o.id}`;u.addNewTab({name:f,label:`Order #${o.num}`,closable:!0}),m.push(f)}return{columns:c,orders:r,orderStore:s,stateToBadgeMap:d,onRowClick:t}}};function v(c,d,s,r,m,u){return n(),i(g,{class:"q-pa-md row justify-center items-start"},{default:a(()=>[r.orders.length===0?(n(),i(w,{key:0,indeterminate:"",size:"90px",thickness:.2,color:"indigo","center-color":"grey-4","track-color":"grey-2"})):p("",!0),r.orders.length?(n(),i(k,{key:1,class:"col sticky-header-column-table",title:"Orders",rows:r.orders,columns:r.columns,"row-key":"id",onRowClick:_(r.onRowClick,["stop"]),pagination:{rowsPerPage:10}},{"body-cell-state":a(t=>[l(b,{props:t},{default:a(()=>[Q("div",null,[l(h,{color:r.stateToBadgeMap.get(t.row.state).color,label:r.stateToBadgeMap.get(t.row.state).label},null,8,["color","label"])])]),_:2},1032,["props"])]),"body-cell-do_delete":a(t=>[l(b,{props:t},{default:a(()=>[l(y,{icon:"delete",flat:"",size:"0.6rem",onClick:_(()=>r.orderStore.dispatchDeleteOrder(t.row.id),["prevent","stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","onRowClick"])):p("",!0)]),_:1})}var V=T(O,[["render",v]]);export{V as default};
